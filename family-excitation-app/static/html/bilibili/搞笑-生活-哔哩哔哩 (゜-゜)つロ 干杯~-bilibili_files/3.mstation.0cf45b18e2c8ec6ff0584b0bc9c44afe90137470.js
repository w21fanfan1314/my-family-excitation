(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{163:function(t,e,i){"use strict";var n={props:{src:{type:String,default:""},width:{type:Number},height:{type:Number},alt:{type:String},hasBg:{type:Boolean,default:!1}},methods:{loadCallback:function(){this.$emit("report")}}},r=(i(180),i(25)),o=Object(r.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bfs-img-wrap",class:{hasBg:this.hasBg}},[e("BImg",{staticClass:"bfs-img",attrs:{src:this.src,alt:this.alt,loading:!1,"format-options":{w:this.width,h:this.height,c:!0}},on:{load:this.loadCallback}})],1)}),[],!1,null,"6e0fbb41",null);e.a=o.exports},164:function(t,e,i){"use strict";var n=i(4),r=i.n(n),o={props:{appid:{},extinfo:{}},data:function(){return{template:'\n        <style>\n          * {\n            -webkit-tap-highlight-color: transparent !important;\n          }\n          * {\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n          }\n        </style>\n        <div class="template"></div>\n      '}},methods:{onReady:function(){this.$el.isReady=!0,this.$emit("ready"),window.performanceReport&&window.performanceReport("wxtag_ready")},onClick:function(t){(t.target.isReady||Date.now()-window.pageLoadTime<1e3)&&t.stopPropagation()}}},s=(i(178),i(25)),a=Object(s.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("wx-open-launch-app",{staticClass:"wx-open-app-btn",attrs:{appid:t.appid,extinfo:t.extinfo},on:{click:t.onClick,launch:function(e){return t.$emit("launch",e)},error:function(e){return t.$emit("error",e)},ready:t.onReady}},[i("script",{attrs:{type:"text/wxtag-template"},domProps:{innerHTML:t._s(t.template)}})])}),[],!1,null,null,null).exports,c=i(18),p=i(40),u=i(1),d=i(165),l=i(26);function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var m={components:{WxOpenApp:a},props:{tag:{type:String,default:"div"},type:{},id:{},aid:{},bvid:{},extra:{},spmid:{},directJump:{},preloadWxtag:{},additions:{},directSchema:{},disableClipboard:{},disableUniversal:Boolean,mute:{type:Boolean,default:!1},reportMsg:{type:Object,default:null},autoReport:{type:Boolean,default:!1}},computed:f(f({},Object(c.c)({info:function(t){return t.video.viewInfo},p:function(t){return t.video.p},currentTime:function(t){return t.video.currentTime},isWxTagLaunch:function(t){return t.common.isWxTagLaunch},abtest:function(t){return t.common.abtest},keyword:function(t){return t.video.keyword||t.search.keyword},trigglePlay:function(t){return t.video.trigglePlay},isNewOpenid:function(t){return t.video.isNewOpenid},isNewIpua:function(t){return t.video.isNewIpua}})),{},{expParams:function(){var t,e,i=this.abtest,n=i.h5_android_download_method,r=i.h5_ios_download_method,o=/\/video\//.test(this.$route.path),s="1"===(null===(t=this.$route)||void 0===t||null===(e=t.query)||void 0===e?void 0:e.forceHit);return{isHitIos:s||1==r&&o,isHitAndroid:s||1==n&&o}},duration:function(){var t=this.info.pages;return t&&0!==t.length?t[this.p-1].duration:0},extraType:function(){if("video"===this.type&&this.id===this.info.aid&&("story"===this.$route.query["-Atype"]||"story"===this.$route.query["-Arouter"])){if(""===this.extra)return"-Arouter=story&source=web";var t=this.extra.split("&");return t.push("-Arouter=story"),t.push("source=web"),t.join("&")}return this.extra},schema:function(){return Object(p.d)({type:this.type,id:this.id,extra:this.extraType,spmid:this.realSpmid})},extinfo:function(){return this.directSchema?this.directSchema:p.e?Object(p.c)(this.openAppParams):this.schema},realSpmid:function(){if(this.spmid)return this.spmid.split(".").length>=4?this.spmid:"".concat(Object(l.a)()||this.$route.meta.spmPrefix,".click.").concat(this.spmid)},openAppParams:function(){var t;return{id:this.id,bvid:this.bvid,type:this.type,extra:this.extraType,spmid:this.realSpmid,duration:this.duration,currentTime:this.currentTime,disableClipboard:this.disableClipboard,disableUniversal:this.disableUniversal,expParams:this.expParams,addition:Object.assign({item_label:"article"===this.type||"dyn"===this.type?"dynamic":"",is_story_play:null===(t=this.info)||void 0===t?void 0:t.is_story_play},this.additions)}}}),data:function(){return{loaded:!1}},mounted:function(){this.loaded=!0,this.$on("open-app",this.report)},methods:{openApp:function(t){if(!this.mute&&(this.$emit("click",t),this.$emit("open-app",t),d.a.$emit("openAppGuiderShow"),!this.directJump))if(this.directSchema)Object(p.h)(this.directSchema);else{var e=this.$route.name;"zhihu"!==window.uaSource||"video"!==this.type||"avVideo"!==e&&"bvVideo"!==e?Object(p.g)(this.openAppParams):d.a.$emit("showQrDialog",{spmid:this.realSpmid,aid:this.aid,bvid:this.bvid,extra:this.extraType})}},wxLaunch:function(){this.$customReportH5("click","wxOpenTagSuccess",{schema:this.schema}),this.$emit("open-app")},wxError:function(){this.$customReportH5("click","wxOpenTagFail",{schema:this.schema}),this.$emit("open-app"),Object(p.g)(this.openAppParams)},report:function(){if(this.$customReportH5("click","openApp",{item_id:this.id,avid:this.id,cid:window.player?window.videoCid:"",unique_k:Object(u.q)("unique_k"),share_from:"story"===Object(u.q)("-Atype")||"story"===Object(u.q)("-Arouter")?"story":"",from_spmid:this.realSpmid,awake_spmid:this.realSpmid}),this.autoReport&&this.spmid){var t=this.spmid.split("."),e=t[t.length-1];e&&this.$customReportH5("click",e,this.reportMsg)}}}},b=(i(179),Object(s.a)(m,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return"div"===t.tag?i("div",{staticClass:"launch-app-btn",on:{click:function(e){return e.stopPropagation(),t.openApp.apply(null,arguments)}}},[t._t("default"),t._v(" "),t.mute||!t.isWxTagLaunch||t.directJump||!t.preloadWxtag&&!t.loaded?t._e():i("WxOpenApp",{staticClass:"wx-open-app-btn",attrs:{appid:"wxcb8d4298c6a09bcb",extinfo:t.extinfo,spmid:t.realSpmid,aid:t.id},on:{launch:t.wxLaunch,error:function(e){return t.wxError(e)},ready:function(e){return t.$emit("wxtagready")}}})],2):i("span",{staticClass:"launch-app-btn",on:{click:function(e){return e.stopPropagation(),t.openApp.apply(null,arguments)}}},[t._t("default"),t._v(" "),t.mute||!t.isWxTagLaunch||t.directJump||!t.preloadWxtag&&!t.loaded?t._e():i("WxOpenApp",{staticClass:"wx-open-app-btn",attrs:{appid:"wxcb8d4298c6a09bcb",extinfo:t.extinfo,spmid:t.realSpmid,aid:t.id},on:{launch:t.wxLaunch,error:function(e){return t.wxError(e)},ready:function(e){return t.$emit("wxtagready")}}})],2)}),[],!1,null,null,null));e.a=b.exports},165:function(t,e,i){"use strict";var n=new(i(3).default);e.a=n},166:function(t,e,i){"use strict";var n=i(4),r=i.n(n),o=i(18);function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var c={components:{OpenApp:i(164).a},props:{spmid:{},reportMsg:{},autoReport:{},preloadWxtag:{},disableClipboard:{}},computed:a(a({},Object(o.c)({info:function(t){return t.video.viewInfo},p:function(t){return t.video.p},currentTime:function(t){return t.video.currentTime},playState:function(t){return t.video.playState},isTab3:function(t){return t.video.isTab3}})),{},{extra:function(){var t,e,i,n="page=".concat(this.p-1);!(this.currentTime>0)||"play"!==this.playState&&"pause"!==this.playState||null!==(t=this.info.rights)&&void 0!==t&&t.is_stein_gate||null!==(e=this.info.rights)&&void 0!==e&&e.ugc_pay||(n+="&start_progress=".concat(parseInt(1e3*this.currentTime))),"season"===this.$route.query.share_from&&(n+="&auto_float_layer=3");var r=(null===(i=this.info)||void 0===i?void 0:i.is_story_play)||0;return n+="&is_story_play=".concat(r),n},additions:function(){var t,e={is_story_play:(null===(t=this.info)||void 0===t?void 0:t.is_story_play)||0};return e},openType:function(){return this.isTab3?"tab3video":"video"}})},p=i(25),u=Object(p.a)(c,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("OpenApp",t._g({attrs:{type:t.openType,id:t.info.aid,bvid:t.info.bvid,extra:t.extra,spmid:t.spmid,autoReport:t.autoReport,reportMsg:t.reportMsg,preloadWxtag:t.preloadWxtag,disableClipboard:t.disableClipboard,additions:t.additions}},t.$listeners),[t._t("default")],2)}),[],!1,null,null,null);e.a=u.exports},167:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i(39),r=i(165),o=function(t){var e=t.title,i=t.imgUrl,o=t.desc,s=t.link,a=t.success;Object(n.initOAuthSDK)({debug:!1,appId:"wx8be72568ff217c00",jsApiList:["showOptionMenu","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"],openTagList:["wx-open-launch-app"]}).then((function(){i&&!/^https?:/.test(i)&&(i="http:"+i);var t={title:e,imgUrl:i,desc:o,link:s,success:a};r.a.$emit("weixinReady"),window.weixinReady=!0,window.weixinReadyTime=Date.now(),window.wx.onMenuShareTimeline(t),window.wx.onMenuShareAppMessage(t),window.wx.onMenuShareQQ(t),window.wx.onMenuShareWeibo(t),window.wx.onMenuShareQZone(t)}))}},169:function(t,e,i){},170:function(t,e,i){},171:function(t,e,i){},178:function(t,e,i){"use strict";i(169)},179:function(t,e,i){"use strict";i(170)},180:function(t,e,i){"use strict";i(171)},184:function(t,e,i){},189:function(t,e,i){"use strict";i(184)},198:function(t,e,i){},199:function(t,e,i){"use strict";var n,r=i(3),o={props:{content:{},duration:{type:Number}},data:function(){return{visible:!1}},methods:{destroyElement:function(){this.$destroy(!0),this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},startTimer:function(){var t=this;this.duration>0&&(this.timer=setTimeout((function(){t.visible=!1,t.destroyElement()}),this.duration))}},mounted:function(){this.startTimer()}},s=(i(189),i(25)),a=Object(s.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"reply-toast-fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"reply-toast"},[this._v(this._s(this.content))])])}),[],!1,null,null,null).exports,c=r.default.extend(a);e.a=function(t){var e=document.querySelector(".reply-toast");e&&document.body.removeChild(e);var i=function(t){return(n=new c({propsData:t})).vm=n.$mount(),n.vm}("string"==typeof t?{content:t,duration:2e3}:{content:t.content,duration:t.duration||2e3});return document.body.appendChild(i.$el),i.visible=!0,i}},202:function(t,e,i){"use strict";var n=i(6),r=i.n(n),o=i(4),s=i.n(o),a=i(2),c=i.n(a),p=i(3),u=i(18),d=i(10),l=i(199);function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function f(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){s()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var m=p.default.observable({status:"",progress:0}),b={computed:f(f({},Object(u.c)({abtest:function(t){return t.common.abtest}})),{},{status:function(){return m.status},progress:function(){return m.progress},d:function(){var t=this.progress/100*2*Math.PI*8;return"".concat(t,",100")}}),data:function(){return{config:{text:"升级至完整版B站，尽享高清视频",upgradeText:"点击升级，立享1080P高清视频"}}},methods:{upgrade:function(){this.$customReportH5("click","update"),Object(d.h)((function(t){"1"===t.event?m.status="downloaded":"2"===t.event?(m.status="downloading",m.progress=t.progress):"3"===t.event&&(m.status="undownload",Object(l.a)("下载失败，请稍后再试"))}))},getConfig:function(){var t=this;return r()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.status?t.$customReportH5("show","update_button"):t.isApkReady();case 1:case"end":return e.stop()}}),e)})))()},isApkReady:function(){return r()(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.b)();case 2:e=t.sent,m.status=e?"downloaded":"undownload";case 4:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getConfig()}},w=(i(211),i(25)),v=Object(w.a)(b,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.status?i("div",{staticClass:"upgrade"},["undownload"===t.status||"downloaded"===t.status?i("div",{staticClass:"upgrade-float",on:{click:t.upgrade}},[i("i",{staticClass:"bili-icon"}),t._v(" "),i("span",[t._v(t._s("undownload"===t.status?t.config.text:t.config.upgradeText))])]):i("div",{staticClass:"upgrade-float small"},[i("svg",{staticClass:"load-icon",attrs:{viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("circle",{attrs:{opacity:"0.3",cx:"9",cy:"9",r:"8",stroke:"white","stroke-width":"1.5"}}),t._v(" "),i("circle",{attrs:{cx:"9",cy:"9",r:"8",stroke:"white","stroke-width":"1.5","stroke-dasharray":t.d}})]),i("span",[t._v("已升级 "+t._s(t.progress)+"%")])])]):t._e()}),[],!1,null,null,null);e.a=v.exports},211:function(t,e,i){"use strict";i(198)},336:function(t,e,i){},379:function(t,e,i){"use strict";var n={components:{OpenApp:i(164).a},props:{text:{type:String,default:"打开App，看你感兴趣的视频"}},data:function(){return{show:!1}},methods:{openApp:function(){this.$customReport("fixBtn",window.bsource),this.$customReportH5("click","fixBtn")}},mounted:function(){var t=this,e=window.browser&&window.browser.version&&window.browser.version.mbaid;"seo"===window.bsource||e||(this.show=!0,setTimeout((function(){t.$customReportH5("show","fixBtn")}),1e3))}},r=(i(506),i(25)),o=Object(r.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"float-show"}},[this.show?e("OpenApp",{staticClass:"home-float-openapp",attrs:{type:"index",spmid:"333.400.click.fixBtn"},on:{"open-app":this.openApp}},[e("div",{staticClass:"m-home-float-openapp"},[e("i",{staticClass:"iconfont Navbar_logo"}),this._v(" "),e("span",[this._v(this._s(this.text))])])]):this._e()],1)}),[],!1,null,null,null);e.a=o.exports},506:function(t,e,i){"use strict";i(336)}}]);